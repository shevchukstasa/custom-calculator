# ะัะฟัะฐะฒะปะตะฝะธะต: ะะฒะพะด ัะตะฝั ะบะฐะผะฝั ะทะฐ ะผยฒ ะธะปะธ ะทะฐ ัััะบั + ัะดะฐะปะตะฝะธะต CAPEX/OPEX

## ะะฐัะฐ: 3 ัะตะฒัะฐะปั 2026

## ะัะพะฑะปะตะผะฐ

1. **ะะตะฟัะฐะฒะธะปัะฝัะน ัะพัะผะฐั ะฒะฒะพะดะฐ ัะตะฝั**: ะกะธััะตะผะฐ ะฟัะตะดะปะฐะณะฐะปะฐ ะฒะฒะพะดะธัั ัะตะฝั ะบะฐะผะฝั "ะทะฐ ะบะณ" ะธะปะธ "ะทะฐ ะผยฒ", ะฝะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝัะถะฝะพ "ะทะฐ ะผยฒ" ะธะปะธ "ะทะฐ ัััะบั"
2. **ะะธัะฝัั ะธะฝัะพัะผะฐัะธั ะฒ ัะตะทัะปััะฐัะฐั**: ะ ัะฐะทะดะตะปะต "ะะฐัะฐะผะตััั ัะฐััะตัะฐ" ะฟะพะบะฐะทัะฒะฐะปะธัั CAPEX, OPEX, ัะปะตะบััะธัะตััะฒะพ ะธ ะทะฐัะฟะปะฐัะฐ, ะบะพัะพััะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะต ะดะพะปะถะตะฝ ะฒะธะดะตัั

## ะะตัะตะฝะธะต

### 1. ะะตัะตัะฐะฑะพัะฐะฝ ะบะพะผะฟะพะฝะตะฝั StoneCostInput.tsx

**ะคะฐะนะป:** `src/components/StoneCostInput.tsx`

**ะะทะผะตะฝะตะฝะธั:**

#### ะะฝัะตััะตะนั ะบะพะผะฟะพะฝะตะฝัะฐ
```typescript
interface StoneCostInputProps {
  productArea: number; // ะผยฒ ะพะดะฝะพะณะพ ะธะทะดะตะปะธั (length ร width / 10000)
  onStoneCostChange: (costPerSqM: number) => void;
  initialCostPerSqM?: number;
  onShowDB: () => void;
  onAutoFind: () => void;
  showDB: boolean;
}
```

#### ะะตะถะธะผั ะฒะฒะพะดะฐ
- **ะัะปะพ:** `perKg` | `perSqM` (ะฝะตะฟัะฐะฒะธะปัะฝะพ)
- **ะกัะฐะปะพ:** `perSqM` | `perPcs` (ะฟัะฐะฒะธะปัะฝะพ)

#### ะะพะณะธะบะฐ ะฟะตัะตััะตัะฐ
```typescript
// ะั ะผยฒ ะบ ัััะบะต
const pricePerPcs = pricePerSqM * productArea;

// ะั ัััะบะธ ะบ ะผยฒ
const pricePerSqM = pricePerPcs / productArea;
```

#### UI ะธะทะผะตะฝะตะฝะธั
- "ะะฐ 1 ะบะณ (mil Rp)" โ "ะะฐ 1 ะผยฒ (mil Rp)"
- "ะะฐ 1 ะผยฒ (mil Rp)" โ "ะะฐ 1 ัััะบั (mil Rp)"
- ะะพะบะฐะทัะฒะฐะตััั ะฟะตัะตััะตั: "ะะฐ 1 ัั: X mil Rp" ะธะปะธ "ะะฐ 1 ะผยฒ: X mil Rp"
- ะะพะฑะฐะฒะปะตะฝะฐ ะธะฝัะพัะผะฐัะธั ะพ ะฟะปะพัะฐะดะธ ะธะทะดะตะปะธั ะฒะฝะธะทั

### 2. ะะฑะฝะพะฒะปะตะฝ App.tsx

**ะคะฐะนะป:** `src/App.tsx`

**ะะทะผะตะฝะตะฝะธั:**

#### ะะตัะตะดะฐัะฐ productArea ะฒ ะบะพะผะฟะพะฝะตะฝั
```tsx
<StoneCostInput
  productArea={
    (kilnResults[costKilnType as KilnType]!.product.length *
     kilnResults[costKilnType as KilnType]!.product.width) / 10000
  }
  onStoneCostChange={setStoneCost}
  initialCostPerSqM={stoneCost}
  // ... other props
/>
```

#### ะะฑะฝะพะฒะปะตะฝั ััะฝะบัะธะธ ะฒัะฑะพัะฐ ะบะฐะผะฝั
```typescript
const handleStoneSelect = (stone: StoneEntry) => {
  setStoneCost(stone.pricePerM2); // ะฑัะปะพ: stone.pricePerUnit
  setShowStoneDB(false);
  alert(`ะัะฑัะฐะฝ ะบะฐะผะตะฝั: ${stone.name}\nะฆะตะฝะฐ: ${stone.pricePerM2} mil Rp ะทะฐ ะผยฒ`);
};

const handleAutoFindStone = (product: ProductDimensions) => {
  const stone = findStoneByCriteria(productType, product);
  if (stone) {
    setStoneCost(stone.pricePerM2); // ะฑัะปะพ: stone.pricePerUnit
    alert(`ะะฒัะพะผะฐัะธัะตัะบะธ ะฒัะฑัะฐะฝ: ${stone.name}\nะฆะตะฝะฐ: ${stone.pricePerM2} mil Rp ะทะฐ ะผยฒ`);
  }
};
```

### 3. ะฃะดะฐะปะตะฝั ัะฐะทะดะตะปั ะธะท CostParameters.tsx

**ะคะฐะนะป:** `src/components/CostParameters.tsx`

**ะฃะดะฐะปะตะฝั ัะปะตะดัััะธะต ัะตะบัะธะธ:**

1. **ะะพััะพัะฝะฝัะต ะทะฐััะฐัั** (ัััะพะบะธ 20-31):
   - CAPEX: 405 mil Rp
   - OPEX (ะฒ ะผะตััั): 235 mil Rp

2. **ะกัะพะธะผะพััั ะพะฑะถะธะณะฐ** (ัััะพะบะธ 33-44):
   - ะญะปะตะบััะธัะตััะฒะพ: 0.36 mil Rp
   - ะะฐัะฟะปะฐัะฐ + ะฝะฐะปะพะณะธ: 0.93 mil Rp

**ะะตะทัะปััะฐั:** ะะพะผะฟะพะฝะตะฝั ัะตะฟะตัั ะฝะฐัะธะฝะฐะตััั ััะฐะทั ั ัะฐะทะดะตะปะฐ "ะกัะพะธะผะพััั ะบะฐะผะฝั (ะฝะฐ ะผยฒ)"

### 4. ะะฑะฝะพะฒะปะตะฝ costCalculations.ts

**ะคะฐะนะป:** `src/utils/costCalculations.ts`

**ะะทะผะตะฝะตะฝะธะต:** ะฃัะพัะฝะตะฝ ะบะพะผะผะตะฝัะฐัะธะน ะบ ะฟะฐัะฐะผะตััั `stoneCost`
```typescript
stoneCost: number, // mil Rp ะทะฐ ะผยฒ - ะธะท ะฑะฐะทั ะธะปะธ ะฒะฒะพะด ะฟะพะปัะทะพะฒะฐัะตะปั
```

### 5. ะะฐะทะฐ ะดะฐะฝะฝัั ะบะฐะผะฝะตะน

**ะคะพัะผะฐั:** ะะฐะทะฐ ะดะฐะฝะฝัั ัะถะต ะฟัะฐะฒะธะปัะฝะพ ััะฐะฝะธะปะฐ ะพะฑะฐ ัะพัะผะฐัะฐ ัะตะฝั:
```typescript
export interface StoneEntry {
  id: string;
  name: string;
  pricePerUnit: number; // mil Rp (ะทะฐ ะตะดะธะฝะธัั, ัััะฐัะตะฒัะตะต)
  pricePerM2: number;   // mil Rp (ะทะฐ ะผยฒ, ะธัะฟะพะปัะทัะตััั ัะตะฟะตัั)
  dateAdded: Date;
  productType?: ProductType;
  sizeRange?: string;
}
```

**ะะทะผะตะฝะตะฝะธั:** ะขะตะฟะตัั ัะธััะตะผะฐ ะธัะฟะพะปัะทัะตั `stone.pricePerM2` ะฒะผะตััะพ `stone.pricePerUnit`

## ะะพัะพะบ ะดะฐะฝะฝัั

```mermaid
flowchart TD
    User[ะะพะปัะทะพะฒะฐัะตะปั] -->|ะัะฑะธัะฐะตั ัะตะถะธะผ| Toggle[ะะตัะตะบะปััะฐัะตะปั]
    Toggle -->|ะะฐ ะผยฒ| InputSqM[ะะฒะพะดะธั ัะตะฝั ะทะฐ ะผยฒ]
    Toggle -->|ะะฐ ัััะบั| InputPcs[ะะฒะพะดะธั ัะตะฝั ะทะฐ ัััะบั]
    
    InputSqM --> CalcPcs[ะะฐัััะธัะฐัั ัะตะฝั ะทะฐ ัััะบั]
    InputPcs --> CalcSqM[ะะฐัััะธัะฐัั ัะตะฝั ะทะฐ ะผยฒ]
    
    CalcPcs --> SetState[setStoneCost pricePerSqM]
    CalcSqM --> SetState
    
    SetState --> Calculate[calculateCost]
    Calculate --> Results[ะะพะบะฐะทะฐัั ัะตะทัะปััะฐัั]
    
    Database[(ะะฐะทะฐ ะบะฐะผะฝะตะน)] -->|pricePerM2| SetState
    
    style User fill:#e3f2fd
    style Results fill:#c8e6c9
    style Database fill:#fff9c4
```

## ะะธะทัะฐะปัะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต

### ะะตะถะธะผ "ะะฐ 1 ะผยฒ"
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะฆะตะฝะฐ ะบะฐะผะฝั                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ะะฐ 1 ะผยฒ (mil Rp)                 โ
โ โ ะะฐ 1 ัััะบั (mil Rp)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะฆะตะฝะฐ ะทะฐ 1 ะผยฒ (mil Rp)              โ
โ [1.095]                            โ
โ                                    โ
โ ะะฐ 1 ัั: 0.011 mil Rp              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะฐะทะฐ ะดะฐะฝะฝัั]  [ะะฒัะพะฟะพะดะฑะพั]        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะปะพัะฐะดั ะธะทะดะตะปะธั: 0.0100 ะผยฒ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะตะถะธะผ "ะะฐ 1 ัััะบั"
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะฆะตะฝะฐ ะบะฐะผะฝั                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ะะฐ 1 ะผยฒ (mil Rp)                 โ
โ โ ะะฐ 1 ัััะบั (mil Rp)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะฆะตะฝะฐ ะทะฐ 1 ัััะบั (mil Rp)           โ
โ [0.011]                            โ
โ                                    โ
โ ะะฐ 1 ะผยฒ: 1.095 mil Rp              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะฐะทะฐ ะดะฐะฝะฝัั]  [ะะฒัะพะฟะพะดะฑะพั]        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะปะพัะฐะดั ะธะทะดะตะปะธั: 0.0100 ะผยฒ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะัะธะผะตัั ะฟะตัะตััะตัะฐ

### ะัะธะผะตั 1: ะะปะธัะบะฐ 10x10 ัะผ
- **ะะปะพัะฐะดั:** 0.01 ะผยฒ
- **ะฆะตะฝะฐ ะทะฐ ะผยฒ:** 1.095 mil Rp
- **ะฆะตะฝะฐ ะทะฐ ัััะบั:** 1.095 ร 0.01 = 0.011 mil Rp

### ะัะธะผะตั 2: ะะปะธัะบะฐ 20x20 ัะผ
- **ะะปะพัะฐะดั:** 0.04 ะผยฒ
- **ะฆะตะฝะฐ ะทะฐ ะผยฒ:** 1.095 mil Rp
- **ะฆะตะฝะฐ ะทะฐ ัััะบั:** 1.095 ร 0.04 = 0.044 mil Rp

### ะัะธะผะตั 3: ะกัะพะปะตัะฝะธัะฐ 60x40 ัะผ
- **ะะปะพัะฐะดั:** 0.24 ะผยฒ
- **ะฆะตะฝะฐ ะทะฐ ะผยฒ:** 1.095 mil Rp
- **ะฆะตะฝะฐ ะทะฐ ัััะบั:** 1.095 ร 0.24 = 0.263 mil Rp

## ะงัะพ ะฒะธะดะธั ะฟะพะปัะทะพะฒะฐัะตะปั

### ะะ ะธะทะผะตะฝะตะฝะธะน:
1. **ะะฒะพะด ัะตะฝั:** ะะฐ ะบะณ / ะะฐ ะผยฒ (ะฝะตัะดะพะฑะฝะพ)
2. **ะะฐัะฐะผะตััั ัะฐััะตัะฐ:**
   - โ ะะพััะพัะฝะฝัะต ะทะฐััะฐัั (CAPEX, OPEX)
   - โ ะกัะพะธะผะพััั ะพะฑะถะธะณะฐ (ัะปะตะบััะธัะตััะฒะพ, ะทะฐัะฟะปะฐัะฐ)
   - โ ะกัะพะธะผะพััั ะบะฐะผะฝั
   - โ ะะฝะณะพะฑ ะธ ะณะปะฐะทััั
   - โ ะะฐััะพะดั
   - โ ะะฐัะถะฐ

### ะะะกะะ ะธะทะผะตะฝะตะฝะธะน:
1. **ะะฒะพะด ัะตะฝั:** ะะฐ ะผยฒ / ะะฐ ัััะบั (ัะดะพะฑะฝะพ!)
2. **ะะฐัะฐะผะตััั ัะฐััะตัะฐ:**
   - โ ะกัะพะธะผะพััั ะบะฐะผะฝั
   - โ ะะฝะณะพะฑ ะธ ะณะปะฐะทััั
   - โ ะะฐััะพะดั
   - โ ะะฐัะถะฐ

## ะคะฐะนะปั ะธะทะผะตะฝะตะฝั

1. โ `src/components/StoneCostInput.tsx` - ะฟะพะปะฝะฐั ะฟะตัะตัะฐะฑะพัะบะฐ
2. โ `src/App.tsx` - ะฟะตัะตะดะฐัะฐ productArea, ะพะฑะฝะพะฒะปะตะฝะธะต handleStoneSelect
3. โ `src/components/CostParameters.tsx` - ัะดะฐะปะตะฝะธะต CAPEX/OPEX/ะพะฑะถะธะณะฐ
4. โ `src/utils/costCalculations.ts` - ััะพัะฝะตะฝะธะต ะบะพะผะผะตะฝัะฐัะธั

## ะะตะทัะปััะฐั ัะฑะพัะบะธ

```
โ TypeScript compilation: OK
โ Vite build: OK
โ CSS: 17.06 kB (3.07 kB gzipped)
โ JS:  175.53 kB (54.49 kB gzipped)
```

## ะขะตััะธัะพะฒะฐะฝะธะต

### ะกัะตะฝะฐัะธะน 1: ะะฒะพะด ัะตะฝั ะทะฐ ะผยฒ
1. ะัะฑัะฐัั ะฟะปะธัะบั 10ร10 ัะผ
2. ะะตัะตะนัะธ ะฝะฐ ะฒะบะปะฐะดะบั "ะะฐััะตั ััะพะธะผะพััะธ"
3. ะัะฑัะฐัั ัะตะถะธะผ "ะะฐ 1 ะผยฒ"
4. ะะฒะตััะธ: 1.095
5. **ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:** ะะพะบะฐะทัะฒะฐะตั "ะะฐ 1 ัั: 0.011 mil Rp"

### ะกัะตะฝะฐัะธะน 2: ะะฒะพะด ัะตะฝั ะทะฐ ัััะบั
1. ะัะฑัะฐัั ะฟะปะธัะบั 10ร10 ัะผ
2. ะะตัะตะนัะธ ะฝะฐ ะฒะบะปะฐะดะบั "ะะฐััะตั ััะพะธะผะพััะธ"
3. ะัะฑัะฐัั ัะตะถะธะผ "ะะฐ 1 ัััะบั"
4. ะะฒะตััะธ: 0.011
5. **ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:** ะะพะบะฐะทัะฒะฐะตั "ะะฐ 1 ะผยฒ: 1.095 mil Rp"

### ะกัะตะฝะฐัะธะน 3: ะะฐะทะฐ ะดะฐะฝะฝัั
1. ะัะบัััั "ะะฐะทะฐ ะดะฐะฝะฝัั"
2. ะัะฑัะฐัั ะบะฐะผะตะฝั ะธะท ะฑะฐะทั
3. **ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:** ะฆะตะฝะฐ ัััะฐะฝะฐะฒะปะธะฒะฐะตััั ะธะท ะฟะพะปั `pricePerM2`

### ะกัะตะฝะฐัะธะน 4: ะะฐัะฐะผะตััั ัะฐััะตัะฐ
1. ะะฐัััะธัะฐัั ััะพะธะผะพััั
2. ะะตัะตะบะปััะธัััั ะฒ ัะตะถะธะผ "ะะฐััะธัะตะฝะฝัะน"
3. **ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:** ะะต ะฟะพะบะฐะทัะฒะฐัััั CAPEX, OPEX, ัะปะตะบััะธัะตััะฒะพ, ะทะฐัะฟะปะฐัะฐ

## ะัะตะธะผััะตััะฒะฐ

1. โ **ะะฝััะธัะธะฒะฝัะน ะฒะฒะพะด:** ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะดะพะฑะฝัะน ัะพัะผะฐั
2. โ **ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตััะตั:** ะัะตะณะดะฐ ะฒะธะดะธั ะพะฑะฐ ะทะฝะฐัะตะฝะธั
3. โ **ะขะพัะฝะพััั ัะฐััะตัะพะฒ:** ะะตัะตััะตั ัะตัะตะท ัะตะฐะปัะฝัั ะฟะปะพัะฐะดั ะธะทะดะตะปะธั
4. โ **ะงะธัััะน ะธะฝัะตััะตะนั:** ะฃะฑัะฐะฝะฐ ะปะธัะฝัั ะธะฝัะพัะผะฐัะธั (CAPEX/OPEX)
5. โ **ะะดะธะฝัะน ััะฐะฝะดะฐัั:** ะกะธััะตะผะฐ ัะฐะฑะพัะฐะตั ั ัะตะฝะพะน ะทะฐ ะผยฒ ะฒะฝัััะธ

---

**URL:** http://localhost:5173  
**ะะบะปะฐะดะบะฐ:** "2. ะะฐััะตั ััะพะธะผะพััะธ" โ "ะฆะตะฝะฐ ะบะฐะผะฝั"

ะขะตะฟะตัั ะฒะฒะพะด ัะตะฝั ะบะฐะผะฝั ัะฐะฑะพัะฐะตั ะฟัะฐะฒะธะปัะฝะพ! ๐ฏ
