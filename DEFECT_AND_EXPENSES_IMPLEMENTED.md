# ะะทะผะตะฝะตะฝะธั: ะัะฐะบ ะธ ัะฐััะพะดั - ะะตะฐะปะธะทะฐัะธั ะทะฐะฒะตััะตะฝะฐ

## ะะฐัะฐ: 3 ัะตะฒัะฐะปั 2026

## ะัะฟะพะปะฝะตะฝะฝัะต ะธะทะผะตะฝะตะฝะธั

### 1. โ ะคะธะบัะฐัะธั ัะฐััะพะดะพะฒ ะฝะฐ ะฟัะพะดะฐะถะธ ะธ ะฟัะพัะธะต

**ะคะฐะนะป:** `src/utils/costLogic.ts`

**ะะทะผะตะฝะตะฝะพ:**
- `determineSalesExpensesPercent()` - ัะตะฟะตัั ะฒะพะทะฒัะฐัะฐะตั ัะธะบัะธัะพะฒะฐะฝะฝัะต **10%**
- `determineOtherExpensesPercent()` - ัะตะฟะตัั ะฒะพะทะฒัะฐัะฐะตั ัะธะบัะธัะพะฒะฐะฝะฝัะต **5%**

### 2. โ ะะพะฒะฐั ะปะพะณะธะบะฐ ะฑัะฐะบะฐ ะฟัะพะดัะบัะธะธ ะฟะพ ัะฐะทะผะตัะฐะผ

**ะคะฐะนะป:** `src/utils/costLogic.ts`

**ะคัะฝะบัะธั:** `determineDefectExpensesPercent()`

**ะะปั ะฟะปะธัะบะธ ะธ ััะพะปะตัะฝะธั (tile, countertop):**
- ะดะพ 20ร40 ัะผ โ **7%**
- ะพั 20ร40 ะดะพ 30ร60 ัะผ โ **10%**
- ะพั 30ร60 ะดะพ 40ร80 ัะผ โ **13%**
- ะพั 40ร80 ะดะพ 50ร100 ัะผ โ **17%**
- ะพั 50ร100 ะดะพ 90ร120 ัะผ โ **20%**
- ัะฒััะต 90ร120 ัะผ โ **25%**

**ะะปั ัะฐะบะพะฒะธะฝ ะธ 3D (sink, 3d):**
- ะดะพ 25ร35 ัะผ โ **20%**
- ะดะพ 40ร60 ัะผ โ **25%**
- ัะฒััะต 40ร60 ัะผ โ **30%**

**ะััะณะปัะต ะธ ััะตัะณะพะปัะฝัะต ัะพัะผั:** ะธัะฟะพะปัะทััั ัั ะถะต ะปะพะณะธะบั ะฟะพ ัะฐะทะผะตัะฐะผ

### 3. โ ะะพะฒะฐั ะปะพะณะธะบะฐ ะฑัะฐะบะฐ ะบะฐะผะฝั

**ะคะฐะนะป:** `src/utils/costLogic.ts`

**ะคัะฝะบัะธั:** `determineStoneDefectPercent()` - ะฑะฐะทะพะฒัะน ะฟัะพัะตะฝั

ะัะฟะพะปัะทัะตััั ัะฐ ะถะต ะปะพะณะธะบะฐ ะฟะพ ัะฐะทะผะตัะฐะผ ะธ ัะธะฟะฐะผ, ััะพ ะธ ะดะปั ะฑัะฐะบะฐ ะฟัะพะดัะบัะธะธ.

**ะะพะฒะฐั ััะฝะบัะธั:** `calculateStoneDefectByQuantity()`

**ะคะพัะผัะปะฐ:** `max(ะฑะฐะทะพะฒัะน_ะฟัะพัะตะฝั, (1 / ะบะพะปะธัะตััะฒะพ) * 100)`

**ะัะธะผะตัั:**
- 1 ัั โ 100% (ะฒัะตะณะดะฐ +1 ะทะฐะฟะฐัะฝะฐั)
- 2 ัั โ 50%
- 5 ัั โ 20%
- 10 ัั โ 10%
- 100 ัั โ ะฑะฐะทะพะฒัะน % (ะฝะฐะฟัะธะผะตั, 7% ะดะปั ะผะฐะปะตะฝัะบะพะน ะฟะปะธัะบะธ)

### 4. โ ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต "ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต"

**ะคะฐะนะป:** `src/types/index.ts`

ะะพะฑะฐะฒะปะตะฝะพ ะฒ `ProductWithType`:
```typescript
orderQuantity?: number; // ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต
```

**ะคะฐะนะป:** `src/App.tsx`

- ะะพะฑะฐะฒะปะตะฝ state: `const [orderQuantity, setOrderQuantity] = useState<number>(1);`
- ะะพะฑะฐะฒะปะตะฝ UI ะบะพะผะฟะพะฝะตะฝั ั ะฟะพะปะตะผ ะฒะฒะพะดะฐ ะฒ ัะฐะทะดะตะป ัะฐััะตัะฐ ััะพะธะผะพััะธ
- ะะฑะฝะพะฒะปะตะฝั ะฒัะต ัะพะทะดะฐะฝะธั `productWithType` ะดะปั ะฒะบะปััะตะฝะธั `orderQuantity`

### 5. โ ะะฝัะตะณัะฐัะธั ะบะพะปะธัะตััะฒะฐ ะฒ ัะฐััะตัั

**ะคะฐะนะป:** `src/utils/costLogic.ts`

ะคัะฝะบัะธั `getAutoParameters()` ะพะฑะฝะพะฒะปะตะฝะฐ:
```typescript
const baseStoneDefect = determineStoneDefectPercent(product, shape);
const orderQuantity = product.orderQuantity || 1;

return {
  // ...
  stoneDefectPercent: calculateStoneDefectByQuantity(baseStoneDefect, orderQuantity),
  // ...
};
```

### 6. โ ะกะบััั ัะฐะทะดะตะป "ะะฐััะพะดั" ะฒ UI

**ะคะฐะนะป:** `src/components/CostParameters.tsx`

ะะพะปะฝะพัััั ัะดะฐะปะตะฝ ะฑะปะพะบ ะพัะพะฑัะฐะถะตะฝะธั:
- ะัะฐะบ ะฟัะพะดัะบัะธะธ (%)
- ะะฐััะพะดั ะฝะฐ ะฟัะพะดะฐะถะธ (%)
- ะัะพัะธะต ัะฐััะพะดั (%)
- ะัะพะณะพ ัะฐััะพะดั

**ะงัะพ ะพััะฐะปะพัั ะฒะธะดะธะผัะผ:**
- ะกัะพะธะผะพััั ะบะฐะผะฝั (ั ะฑัะฐะบะพะผ ะบะฐะผะฝั, ะทะฐะฒะธัััะธะผ ะพั ะบะพะปะธัะตััะฒะฐ)
- ะะฝะณะพะฑ ะธ ะณะปะฐะทััั
- ะะฐัะถะฐ

### 7. โ ะะฑะฝะพะฒะปะตะฝั ััะธะปะธ

**ะคะฐะนะป:** `src/App.css`

ะะพะฑะฐะฒะปะตะฝั ััะธะปะธ ะดะปั `.order-quantity-input`:
- ะกัะธะปั ะบะฐััะพัะบะธ ั ัะตะฝัั
- Hover ัััะตะบัั
- ะะฝัะพัะผะฐัะธะพะฝะฝัะน ัะตะบัั

## ะัะธะผะตัั ัะฐััะตัะพะฒ

### ะัะธะผะตั 1: ะะฐะปะตะฝัะบะฐั ะฟะปะธัะบะฐ 10ร10 ัะผ, ะทะฐะบะฐะท 5 ัััะบ

**ะัะฐะบ ะฟัะพะดัะบัะธะธ:** 7% (ัะฐะทะผะตั ะดะพ 20ร40)
**ะะฐะทะพะฒัะน ะฑัะฐะบ ะบะฐะผะฝั:** 7%
**ะัะฐะบ ะบะฐะผะฝั ั ััะตัะพะผ ะบะพะปะธัะตััะฒะฐ:** max(7%, 100%/5) = max(7%, 20%) = **20%**

**ะะฐััะพะดั:**
- ะัะพะดะฐะถะธ: ัะธะบัะธัะพะฒะฐะฝะฝัะต **10%**
- ะัะพัะธะต: ัะธะบัะธัะพะฒะฐะฝะฝัะต **5%**

### ะัะธะผะตั 2: ะะพะปััะฐั ะฟะปะธัะบะฐ 50ร50 ัะผ, ะทะฐะบะฐะท 100 ัััะบ

**ะัะฐะบ ะฟัะพะดัะบัะธะธ:** 20% (ัะฐะทะผะตั 50ร100 ะดะพ 90ร120)
**ะะฐะทะพะฒัะน ะฑัะฐะบ ะบะฐะผะฝั:** 20%
**ะัะฐะบ ะบะฐะผะฝั ั ััะตัะพะผ ะบะพะปะธัะตััะฒะฐ:** max(20%, 100%/100) = max(20%, 1%) = **20%**

### ะัะธะผะตั 3: ะะฐะบะพะฒะธะฝะฐ 30ร40 ัะผ, ะทะฐะบะฐะท 2 ัััะบะธ

**ะัะฐะบ ะฟัะพะดัะบัะธะธ:** 25% (ัะฐะทะผะตั ะดะพ 40ร60)
**ะะฐะทะพะฒัะน ะฑัะฐะบ ะบะฐะผะฝั:** 25%
**ะัะฐะบ ะบะฐะผะฝั ั ััะตัะพะผ ะบะพะปะธัะตััะฒะฐ:** max(25%, 100%/2) = max(25%, 50%) = **50%**

### ะัะธะผะตั 4: ะกัะพะปะตัะฝะธัะฐ 100ร80 ัะผ, ะทะฐะบะฐะท 1 ัััะบะฐ

**ะัะฐะบ ะฟัะพะดัะบัะธะธ:** 25% (ัะฐะทะผะตั ัะฒััะต 90ร120)
**ะะฐะทะพะฒัะน ะฑัะฐะบ ะบะฐะผะฝั:** 25%
**ะัะฐะบ ะบะฐะผะฝั ั ััะตัะพะผ ะบะพะปะธัะตััะฒะฐ:** max(25%, 100%/1) = max(25%, 100%) = **100%**

## UI ะธะทะผะตะฝะตะฝะธั

### ะะพะฒัะน ัะฐะทะดะตะป "ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต"

ะะฐัะฟะพะปะพะถะตะฝ ะฒ ัะฐะทะดะตะปะต ัะฐััะตัะฐ ััะพะธะผะพััะธ, ะผะตะถะดั "ะฆะตะฝะพะน ะบะฐะผะฝั" ะธ ะบะฝะพะฟะบะพะน "ะะฐัััะธัะฐัั ััะพะธะผะพััั":

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะฆะตะฝะฐ ะบะฐะผะฝั                         โ
โ โข ะะฐ 1 ะผยฒ (mil Rp)                 โ
โ โข ะะฐ 1 ัััะบั (mil Rp)              โ
โ โข ะะฐะทะฐ ะดะฐะฝะฝัั / ะะฒัะพะฟะพะดะฑะพั         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต           โ
โ ะะพะปะธัะตััะฒะพ [  1  ] (ะผะธะฝ. 1)        โ
โ โน ะะปะธัะตั ะฝะฐ ัะฐััะตั ะฑัะฐะบะฐ ะบะฐะผะฝั     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[ ะะฐัััะธัะฐัั ััะพะธะผะพััั ]
```

### ะะฐัะฐะผะตััั ัะฐััะตัะฐ (ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฐัะฐะผะตััั ัะฐััะตัะฐ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะกัะพะธะผะพััั ะบะฐะผะฝั (ะฝะฐ ะผยฒ)            โ
โ โข ะฆะตะฝะฐ: 1.095 mil Rp               โ
โ โข ะะะก (12%): 0.131 mil Rp          โ
โ โข ะฃะฟะฐะบะพะฒะบะฐ: 0.10 mil Rp            โ
โ โข ะะพััะฐะฒะบะฐ: 0.18 mil Rp            โ
โ โข ะัะฐะบ ะบะฐะผะฝั (%): 20.0%            โ โ ะะฐะฒะธัะธั ะพั ะบะพะปะธัะตััะฒะฐ!
โ โข ะกัะพะธะผะพััั ะฑัะฐะบะฐ: 0.219 mil Rp    โ
โ โข ะัะพะณะพ: 1.73 mil Rp               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะฝะณะพะฑ ะธ ะณะปะฐะทััั                    โ
โ โข ะะฐะทะพะฒะฐั: 0.20 mil Rp             โ
โ โข ะะพัััะธัะธะตะฝั: 1.0x                โ
โ โข ะัะพะณะพ: 0.20 mil Rp               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะฐัะถะฐ                              โ
โ โข ะัะพัะตะฝั: 30.0%                   โ
โ โข ะะฝะฐัะตะฝะธะต: ...                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[ะะฐะทะดะตะป "ะะฐััะพะดั" ะฃะะะะะ]
```

## ะกัะฐะฒะฝะตะฝะธะต ะปะพะณะธะบะธ: ะะ ะธ ะะะกะะ

### ะัะฐะบ ะฟัะพะดัะบัะธะธ (defectExpensesPercent)

**ะะ:**
- ะัะต ัะธะฟั: ัะธะบัะธัะพะฒะฐะฝะฝัะต 10%

**ะะะกะะ:**
- ะะปะธัะบะฐ/ััะพะปะตัะฝะธัะฐ: 7-25% ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะฐะทะผะตัะฐ
- ะะฐะบะพะฒะธะฝะฐ/3D: 20-30% ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะฐะทะผะตัะฐ

### ะัะฐะบ ะบะฐะผะฝั (stoneDefectPercent)

**ะะ:**
- ะัะต ัะธะฟั: ัะธะบัะธัะพะฒะฐะฝะฝัะต 10%
- ะะต ะทะฐะฒะธัะตะป ะพั ะบะพะปะธัะตััะฒะฐ

**ะะะกะะ:**
- ะะฐะทะพะฒัะน ะฟัะพัะตะฝั: 7-30% ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะฐะทะผะตัะฐ ะธ ัะธะฟะฐ
- ะคะธะฝะฐะปัะฝัะน ะฟัะพัะตะฝั: max(ะฑะฐะทะพะฒัะน%, 100%/ะบะพะปะธัะตััะฒะพ)
- **ะะฐะฒะธัะธั ะพั ะบะพะปะธัะตััะฒะฐ ัััะบ ะฒ ะทะฐะบะฐะทะต**

### ะะฐััะพะดั

**ะะ:**
- ะัะพะดะฐะถะธ: 8-15% ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะฐะทะผะตัะฐ
- ะัะพัะธะต: 5% (ัะธะบัะธัะพะฒะฐะฝะฝัะต)

**ะะะกะะ:**
- ะัะพะดะฐะถะธ: **10%** (ัะธะบัะธัะพะฒะฐะฝะฝัะต)
- ะัะพัะธะต: **5%** (ัะธะบัะธัะพะฒะฐะฝะฝัะต)
- **ะะฐะทะดะตะป ัะบััั ะฒ UI**

## ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั

1. โ `src/utils/costLogic.ts` - ะฝะพะฒะฐั ะปะพะณะธะบะฐ ะฑัะฐะบะฐ ะธ ัะธะบัะธัะพะฒะฐะฝะฝัะต ัะฐััะพะดั
2. โ `src/types/index.ts` - ะดะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต orderQuantity
3. โ `src/App.tsx` - ะดะพะฑะฐะฒะปะตะฝ state ะธ UI ะดะปั ะบะพะปะธัะตััะฒะฐ
4. โ `src/components/CostParameters.tsx` - ัะบััั ัะฐะทะดะตะป ัะฐััะพะดะพะฒ
5. โ `src/App.css` - ะดะพะฑะฐะฒะปะตะฝั ััะธะปะธ ะดะปั order-quantity-input

## ะะตะทัะปััะฐั ัะฑะพัะบะธ

```bash
โ TypeScript compilation: OK
โ Vite build: OK
โ CSS: 18.04 kB (3.29 kB gzipped)
โ JS:  178.70 kB (55.50 kB gzipped)
โ ะกะฑะพัะบะฐ ะทะฐะฒะตััะตะฝะฐ ะฑะตะท ะพัะธะฑะพะบ
```

## ะัะพะณะธ

ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน:

1. โ ะะฐััะพะดั ะฝะฐ ะฟัะพะดะฐะถะธ ัะธะบัะธัะพะฒะฐะฝั ะฝะฐ 10%
2. โ ะัะพัะธะต ัะฐััะพะดั ัะธะบัะธัะพะฒะฐะฝั ะฝะฐ 5%
3. โ ะะฐะทะดะตะป "ะะฐััะพะดั" ะฟะพะปะฝะพัััั ัะบััั ะฒ UI
4. โ ะัะฐะบ ะฟัะพะดัะบัะธะธ ะทะฐะฒะธัะธั ะพั ัะฐะทะผะตัะพะฒ ะธ ัะธะฟะฐ (7-30%)
5. โ ะัะฐะบ ะบะฐะผะฝั ะทะฐะฒะธัะธั ะพั ัะฐะทะผะตัะพะฒ, ัะธะฟะฐ ะ ะบะพะปะธัะตััะฒะฐ ะฒ ะทะฐะบะฐะทะต
6. โ ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต "ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต" ะฒ UI
7. โ ะคะพัะผัะปะฐ ะฑัะฐะบะฐ ะบะฐะผะฝั: ะฒัะตะณะดะฐ +1 ะทะฐะฟะฐัะฝะฐั ัััะบะฐ, ะฝะพ ะฝะต ะผะตะฝะตะต ะฑะฐะทะพะฒะพะณะพ %
8. โ ะัะต ะฟะฐัะฐะผะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธะต, ะฝะต ััะตะฑััั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั
9. โ ะััะณะปัะต ะธ ััะตัะณะพะปัะฝัะต ัะพัะผั ะธัะฟะพะปัะทััั ัั ะถะต ะปะพะณะธะบั ะฟะพ ัะฐะทะผะตัะฐะผ

## ะคะพัะผัะปะฐ ัะฐััะตัะฐ ะฑัะฐะบะฐ ะบะฐะผะฝั (ะดะตัะฐะปัะฝะพะต ะพะฑัััะฝะตะฝะธะต)

```
ะะฐะฝะพ:
- ะะฐะทะพะฒัะน ะฑัะฐะบ ะดะปั ัะฐะทะผะตัะฐ/ัะธะฟะฐ: B%
- ะะพะปะธัะตััะฒะพ ัััะบ ะฒ ะทะฐะบะฐะทะต: Q

ะะพะณะธะบะฐ:
- ะัะถะฝะพ ะฒัะตะณะดะฐ ะทะฐะบะฐะทะฐัั ะผะธะฝะธะผัะผ +1 ะทะฐะฟะฐัะฝัั ัััะบั
- ะัะพัะตะฝั ะพั ััะพะน ัััะบะธ: (1 / Q) * 100%

ะคะธะฝะฐะปัะฝัะน ะฑัะฐะบ ะบะฐะผะฝั:
ะัะฐะบะะฐะผะฝั = max(B%, (1 / Q) * 100%)

ะัะธะผะตัั:
Q=1  โ max(7%, 100%) = 100%
Q=2  โ max(7%, 50%)  = 50%
Q=5  โ max(7%, 20%)  = 20%
Q=10 โ max(7%, 10%)  = 10%
Q=15 โ max(7%, 6.7%) = 7%   โ ะดะพััะธะณะปะธ ะฑะฐะทะพะฒะพะณะพ
Q=50 โ max(7%, 2%)   = 7%
Q=100โ max(7%, 1%)   = 7%
```

---

**URL ะดะปั ัะตััะธัะพะฒะฐะฝะธั:** http://localhost:5173

ะัะต ะธะทะผะตะฝะตะฝะธั ัะตะฐะปะธะทะพะฒะฐะฝั ะธ ะฟัะพัะตััะธัะพะฒะฐะฝั! ๐ฏ
